/* ==========================================================================
   styles/report.scss — UAH · EPI (único archivo)
   ========================================================================== */

/*-- scss:defaults --*/
/* Paleta / Tipografías (si usas _brand.yml, esto refuerza) */
$brand-brand:        #0a6d7c !default;
$brand-brand-dark:   #0a4e58 !default;
$brand-brand-accent: #19b5c6 !default;
$brand-text:         #11222b !default;
$brand-muted:        #4b5661 !default;

$body-color:               $brand-text !default;
$link-color:               $brand-brand !default;
$link-hover-color:         $brand-brand-accent !default;
$headings-color:           $brand-brand-dark !default;

$font-family-sans-serif:   "Inconsolata", ui-monospace, Menlo, Monaco, Consolas, "Liberation Mono", monospace !default;
$font-family-monospace:    "Inconsolata", ui-monospace, Menlo, Monaco, Consolas, "Liberation Mono", monospace !default;

/* Helpers sin @use: darken/lighten con mix() */
@function darken-by($color, $pct)  { @return mix(black, $color, $pct); }
@function lighten-by($color, $pct) { @return mix(white, $color, $pct); }

/* --------------------------------------------------------------------------
   BASE
   -------------------------------------------------------------------------- */
html, body {
  font-family: $font-family-sans-serif;
  color: $body-color;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

a {
  color: $link-color;
  text-decoration: none;
  &:hover, &:focus { color: $link-hover-color; text-decoration: underline; }
}

/* --------------------------------------------------------------------------
   QUARTO TITLE BLOCK (oculto)
   -------------------------------------------------------------------------- */
.quarto-title-block { display: none !important; }

/* --------------------------------------------------------------------------
   HEADER MANUAL (logo + título + subtítulo)
   -------------------------------------------------------------------------- */
.brand-logo          { height: 30px; width: auto; display: block; }
.brand-title         { margin: .25rem 0 .75rem 0; border-bottom: 1px solid mix(black, $brand-brand, 20%); padding-bottom: .6rem; }
.brand-title-main    { display: block; font-weight: 900; color: $brand-brand-dark; font-size: 2.5rem; line-height: 1.1; }
.brand-title-sub     { display: block; font-weight: 700; color: $link-color;      font-size: 1.5rem; line-height: 1.25; }

/* (Si en algún documento usas .brand-header, que no añada un “bloque”) */
.brand-header { margin: 0 0 .75rem 0; border: 0; padding: 0; }

/* --------------------------------------------------------------------------
   TOC (sidebar) — que empiece debajo del header
   -------------------------------------------------------------------------- */

/* ⚙️ Ajusta esta altura si cambias el tamaño del logo o de las fuentes */
:root { --toc-top-offset: 220px; }

.sidebar,
#quarto-sidebar { top: var(--toc-top-offset) !important; }

/* Para que los anclajes no queden ocultos debajo del header */
main.content > * { scroll-margin-top: calc(var(--toc-top-offset) + 16px); }

/* En pantallas angostas, deja el sidebar en el tope habitual */
@media (max-width: 991.98px) {
  .sidebar, #quarto-sidebar { top: 0 !important; }
  main.content > * { scroll-margin-top: 72px; }
}

/* --------------------------------------------------------------------------
   ENCABEZADOS / TIPOGRAFÍA
   -------------------------------------------------------------------------- */
h1, h2, h3, h4, h5, h6 {
  font-family: inherit; color: $headings-color;
  font-weight: 900; letter-spacing: 0.01em;
  margin-top: .6rem; margin-bottom: .45rem;
}
h1 { font-size: clamp(1.8rem, 2.8vw, 2.15rem); }
h2 { font-size: clamp(1.4rem, 2.2vw, 1.8rem); }
h3 { font-size: clamp(1.15rem, 1.8vw, 1.45rem); }

p       { line-height: 1.46; margin: .45rem 0; }
ul, ol  { padding-left: 1.25rem; }

/* --------------------------------------------------------------------------
   TABLAS
   -------------------------------------------------------------------------- */
table { width: 100%; border-collapse: collapse; margin: .75rem 0 1.1rem 0; font-size: .98rem; }
table th, table td { padding: .55rem .6rem; border-bottom: 1px solid lighten-by($brand-muted, 35%); }
table thead th { color: $brand-brand-dark; border-bottom: 2px solid darken-by($brand-brand, 15%); }

/* gt */
.gt_table { border: 1px solid lighten-by($brand-muted, 35%); box-shadow: 0 6px 18px rgba(0,0,0,.06); }
.gt_table .gt_heading       { background: lighten-by($brand-brand, 55%); color: $brand-brand-dark; }
.gt_table .gt_col_headings  { background: lighten-by($brand-brand, 70%); color: $brand-brand-dark; border-bottom: 2px solid darken-by($brand-brand, 5%); }
.gt_table .gt_row           { border-top: 1px solid lighten-by($brand-muted, 45%); }
.gt_table .gt_table_body    { background: #fff; }

/* --------------------------------------------------------------------------
   CALLOUTS
   -------------------------------------------------------------------------- */
.callout { border-left: 4px solid $brand-brand; }
.callout-note      { border-left-color: $brand-brand; }
.callout-tip       { border-left-color: $brand-brand-accent; }
.callout-important { border-left-color: darken-by($brand-brand, 10%); }
.callout-warning   { border-left-color: #e6a100; }
.callout-caution   { border-left-color: #c0392b; }

/* --------------------------------------------------------------------------
   CÓDIGO
   -------------------------------------------------------------------------- */
pre, code, kbd, samp { font-family: $font-family-monospace; }
pre code { font-size: .9rem; }
.cell-output pre, .cell-output code { font-size: .92rem; }

/* --------------------------------------------------------------------------
   FIGURAS / IMÁGENES
   -------------------------------------------------------------------------- */
.figure, figure {
  margin: 1rem auto; text-align: center;
  img { max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 8px 22px rgba(0,0,0,.08); }
}
.img-fullbleed { max-height: 92vh; width: 100%; }

/* --------------------------------------------------------------------------
   PLOTLY
   -------------------------------------------------------------------------- */
.js-plotly-plot .plotly .modebar { right: 4px !important; }
.js-plotly-plot .plotly .cartesianlayer .xtick text,
.js-plotly-plot .plotly .cartesianlayer .ytick text {
  font-family: $font-family-monospace !important; fill: $brand-text !important;
}

/* --------------------------------------------------------------------------
   FOOTER / APÉNDICE
   -------------------------------------------------------------------------- */
.small, .footnotes, footer, .quarto-appendix { color: lighten-by($brand-text, 20%); }

/* --------------------------------------------------------------------------
   RESPONSIVE
   -------------------------------------------------------------------------- */
@media (max-width: 780px) {
  .brand-logo        { height: 38px; }
  .brand-title-main  { font-size: 1.6rem; }
  .brand-title-sub   { font-size: 1.05rem; }
}

/* --------------------------------------------------------------------------
   DARK MODE
   -------------------------------------------------------------------------- */
@media (prefers-color-scheme: dark) {
  html, body { color: lighten-by($brand-text, 85%); }
  a { color: lighten-by($brand-brand-accent, 10%); }
  table th, table td { border-bottom-color: lighten-by($brand-muted, 10%); }
  .gt_table { border-color: lighten-by($brand-muted, 10%); }
  .figure img { box-shadow: 0 8px 18px rgba(0,0,0,.5); }
}


/* Tamaño del logo del header */
img.brand-logo {
  max-height: 64px;          /* ← cambia 64 por lo que quieras */
  width: auto !important;    /* rompe el width:100% de .img-fluid */
  height: auto;              /* preserva proporción */
  display: block;
  margin: 0 0 .5rem 0;       /* pequeño espacio debajo */
}

/* En pantallas pequeñas, un poco más chico */
@media (max-width: 991.98px) {
  img.brand-logo { max-height: 48px; }
}




/* ===== Footer full-bleed usando el grid de Quarto ===== */
/* Hace que, cuando el footer vive dentro de .page-columns, ocupe toda la pantalla */
.page-columns .brand-footer { grid-column: screen; }  /* línea mágica */

.brand-footer {
  background: $brand-brand;
  color: #fff;
  border-top: 2px solid darken-by($brand-brand, 12%);
  margin-top: 2rem;
  padding: .9rem 0;               /* sin márgenes negativos ni vw */
   /* antes tenías .9rem; súbelo un poco */
  padding-top: 1.2rem;
  padding-bottom: 1.2rem;
}

/* Contenido del footer (centrado y en 3 columnas) */
.brand-footer-wrap {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center;
  gap: .75rem;
    /* 1–2rem suele verse bien; sube/baja a gusto */
  padding-inline: clamp(1rem, 2vw, 2rem);
}




.brand-footer a { 
  color: lighten-by($brand-brand-accent, 12%); 
  text-decoration: none; 
}
.brand-footer a:hover { color: #fff; text-decoration: underline; }

.brand-footer-wrap > :first-child  { justify-self: start;  }
.brand-footer-wrap > :nth-child(2) { justify-self: center; }
.brand-footer-wrap > :last-child   { justify-self: end;    }

/* Que el footer quede al fondo si la página es corta */
body { min-height: 100vh; display: flex; flex-direction: column; }
main#quarto-document-content, .quarto-container, main.content { flex: 1 0 auto; }
.brand-footer { flex-shrink: 0; }

/* Móvil */
@media (max-width: 780px) {
  .brand-footer-wrap {
    grid-template-columns: 1fr;
    text-align: center;
  }
  .brand-footer-wrap > * { justify-self: center; }
}
